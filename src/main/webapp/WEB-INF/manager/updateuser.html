<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
  <title>title</title>
  <link rel="stylesheet" type="text/css" th:href="@{../static/dist/css/wangEditor.min.css}">
  <script type="text/javascript" th:src="@{../static/dist/js/lib/jquery-1.10.2.min.js}"></script>
  <script type="text/javascript" th:src="@{../static/dist/js/wangEditor.min.js}"></script>
   <script type="text/javascript" th:src="@{../static/js/updateuser.js}"></script>
  <script type="text/javascript">
   	  function seclectValue(){
   	  	var verifysex = '[[${usernews.usSex}]]';
   	  	var usIdentityname = '[[${usernews.usIdentityname}]]'
		var sex = document.getElementById('sex');
		var tyCategoryname = document.getElementById('usIdentityname'); 
		for(var i = 0;i < sex.options.length; i++)
		{
		   var trueSex = sex.options[i];
		   if(verifysex == trueSex.value.trim())
		   {
		     trueSex.selected=true;
		   }
		}
		for(var i = 0;i < tyCategoryname.options.length; i++)
		{
		   var trueCategoryname = tyCategoryname.options[i];
		   if(usIdentityname == trueCategoryname.value.trim())
		   {
		     trueCategoryname.selected=true;
		      myfunction()
		   }
		}
  	  }  
	function myfunction(){
	  	var idCard = document.getElementById("usIdentityname").value;
	  	if (idCard != "manager") {
	  		document.getElementById("onmanager").style.display="";
	  	} else {
	  		document.getElementById("onmanager").style.display="none";
	  	}
	  }
	  
     function modifyContent() {    	
     	        var introduce = document.getElementById("introduce");   	    
     	        introduce.value = editor.$txt.html();
     	          var teachingresults = document.getElementById("teachingresults");   	    
     	        teachingresults.value = editor2.$txt.html();
   }
</script>
<script type="text/javascript" src="https://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>
<script type="text/javascript" th:src="@{../static/js/jquery-3.2.1.min.js}"></script>
<!-- <script type="text/javascript" th:src="@{../static/js/verifyemailname.js}"></script>  -->
</head>
<body onload="myfunction();seclectValue()">
		<p th:text="${news}"></p>
	<form th:action="@{/user/updateUser}" method="post" enctype="multipart/form-data" onsubmit="modifyContent()">
		<input type="hidden" id="usId" name="usId" th:value="${usernews.usId}">
		username:<input type="text" name="usEmail" id="usEmail" th:value="${usernews.usEmail}"><span id="msg"></span><br>
		password:<input type="text" name="usPassword" th:value="${usernews.usPassword}"><br>
		name:<input type="text" name="usName" th:value="${usernews.usName}"><br>
		sex:<select name="usSex" id="sex">
		 	<option th:value="男" th:text="男">男</option>
            <option th:value="女" th:text="女">女</option>
        </select><br>
        idcard:<select name="usIdentityname" id="usIdentityname" onclick="myfunction()" >
        	<option th:each="type,typeStat:${typelist}" th:value="${type.tyCategoryname}" th:text="${type.tyCategoryname}"></option>
        </select>
		telephone:<input type="text" name="usTel" th:value="${usernews.usTel}"><br>
		<div id="onmanager" style="display:none;" >
			<input type="file" name="file" id="file">
			<div style="width:600px; height:400px;">
				<textarea rows="5" cols="35" name="usIntroduce"  style="display:none;" id="introduce"></textarea><br>
     			<div id="editor"  style="width:400px; height:400px;" th:text="${usernews.usIntroduce}"></div>
    			<script type="text/javascript">
	        		var E = window.wangEditor
	        		var editor = new E('editor')    		 
		     		editor.config.uploadImgUrl = 'user/uploadImg'
		     		editor.config.uploadImgFileName = 'myFileName'
	       		 	editor.create()
    			</script>
			</div>
			<div style="width:600px; height:400px;margin-top:-400px;margin-right:200px; float:right;">
				<textarea rows="5" cols="35" name="usTeachingresults"  style="display:none;" id="teachingresults"></textarea><br>
     			<div id="editor2"  style="width:400px; height:400px;" th:text="${usernews.usTeachingresults}"></div>
    			<script type="text/javascript">
	        		var E = window.wangEditor
	        		var editor2 = new E('editor2')    		 
		     		editor.config.uploadImgUrl = 'user/uploadImg'
		     		editor.config.uploadImgFileName = 'myFileName'
	       		 	editor2.create()
    			</script>
			</div>
		</div>
		<input type="submit" id="submit" value="修改" style="margin-top: 300px;">
	</form>
</body>
</html>